(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{56:function(e,t,n){e.exports=n(76)},58:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);n(57),n(58);var a=n(0),r=n.n(a),o=n(5),c=n.n(o),i=n(40),u=n(11),s=n(8),l=n(44),f=n.n(l),d=n(21),m=n.n(d),h=n(98),p=n(45),v=n(46),b=n(51),w=n(50),E=n(34),y=n(47),g=function(e){var t=e.formulas,n=void 0===t?[]:t,a=e.forest;return{nodeType:"formulas",formulas:n,forest:void 0===a?[]:a,id:e.id}},k=function e(t,n){"contradiction"!==t.nodeType&&("finished"!==t.nodeType?0===t.forest.length?t.forest=n(t.id):t.forest.forEach((function(t){return e(t,n)})):console.warn("shouldn't try to append to finished branch"))},j=function(e){return g({formulas:e.map((function(e,t){return O(e,t+1)})),forest:[],id:""})},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return{value:e,resolved:!1,row:t}},C=function(e){return null!=e&&"formulas"===e.nodeType&&0===e.forest.length},S=function(e){return R(e)+e.formulas.length},R=function(e){return e.formulas[0].row},N=function(e,t){for(var n=[];e-- >0;)n.push(O("",t++));return n},x=function(e,t){var n,a=function(e){return e.split("").map((function(t){if("0"===t||"1"===t)return Number(t);throw new Error("invalid character in node id: ".concat(t," in ").concat(e))}))}(t),r=e,o=Object(y.a)(a);try{for(o.s();!(n=o.n()).done;){var c=n.value;if("formulas"!==r.nodeType)throw new Error("Failed to get node path");r=r.forest[c]}}catch(i){o.e(i)}finally{o.f()}return r},T=function(e){return"formulas"===e.nodeType},B=function(e){Object(b.a)(n,e);var t=Object(w.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"updateFormula",value:function(e,t,n){x(this.draftState.tree,e).formulas[t].value=n}},{key:"updateJustification",value:function(e,t){Object.assign(this.draftState.justifications[e],t)}},{key:"updateContradiction",value:function(e,t){Object.assign(x(this.draftState.tree,e),{contradictoryRows:t})}},{key:"updateFeedback",value:function(e){this.draftState.feedback=e}},{key:"toggleResolved",value:function(e,t){var n=x(this.draftState.tree,e);n.formulas[t].resolved=!n.formulas[t].resolved}},{key:"createTree",value:function(e){this.draftState.tree=j(e),this.draftState.nextRow=e.length+1,this.draftState.justifications={1:{rule:"",parentRow:""}}}},{key:"continueBranch",value:function(e,t){var n=this,a=x(this.draftState.tree,e);k(a,(function(e){return[g({id:"".concat(e,"0"),formulas:N(t,n.draftState.nextRow)})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"splitBranch",value:function(e,t){var n=this,a=x(this.draftState.tree,e);k(a,(function(e){var a=N(t,n.draftState.nextRow);return[g({id:"".concat(e,"0"),formulas:a}),g({id:"".concat(e,"1"),formulas:a})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"markContradiction",value:function(e){var t,n=x(this.draftState.tree,e);n.forest=[(t=n.id,{nodeType:"contradiction",formulas:[],contradictoryRows:"",id:"".concat(t,"0")})]}},{key:"markFinished",value:function(e){var t;x(this.draftState.tree,e).forest=[(t=e,{nodeType:"finished",formulas:[],id:"".concat(t,"0")})]}},{key:"reopenBranch",value:function(e){x(this.draftState.tree,e).forest=[]}}]),n}(E.ImmerReducer),P="P->Q,P,~Q".split(","),F={tree:j(P),nextRow:P.length+1,justifications:{1:{rule:"AS",parentRow:""}},feedback:{errorMessage:"Nothing yet."}},D=Object(E.createReducerFunction)(B),Q=Object(E.createActionCreators)(B),A=Q.continueBranch,J=Q.createTree,M=Q.markContradiction,I=Q.markFinished,W=Q.reopenBranch,L=Q.splitBranch,U=Q.toggleResolved,G=Q.updateContradiction,q=Q.updateFeedback,z=Q.updateFormula,H=Q.updateJustification,X=n(103),$=n(104),K=function(e){var t=e.open,n=e.dispatch,a=e.index,o=e.anchorEl,c=e.onClose,i=e.node,u=i.formulas[a];return r.a.createElement(X.a,{open:t,anchorEl:o,onClose:c},r.a.createElement($.a,{onClick:function(){n(A(i.id,1)),c()}},"Continue Branch w/ 1 formula"),r.a.createElement($.a,{onClick:function(){n(L(i.id,1)),c()}},"Split Branch w/ 1 formula"),r.a.createElement($.a,{onClick:function(){n(A(i.id,2)),c()}},"Continue Branch w/ 2 formulas"),r.a.createElement($.a,{onClick:function(){n(L(i.id,2)),c()}},"Split Branch w/ 2 formulas"),r.a.createElement($.a,{onClick:function(){n(U(i.id,a)),c()}},"Mark as ",u.resolved?"Un":"","Resolved"),C(i)&&r.a.createElement($.a,{onClick:function(){n(M(i.id)),c()}},"Close Branch With Contradiction"),C(i)&&r.a.createElement($.a,{onClick:function(){n(I(i.id)),c()}},"Mark Branch Finished"),"contradiction"===i.nodeType&&r.a.createElement($.a,{onClick:function(){n(W(i.id)),c()}},"Reopen Branch"))},V=function(e){var t=e.index,n=e.row,o=e.dispatch,c=e.node,i=c.formulas[t],u=i.value,l=i.resolved,f=Object(a.useState)(!1),d=Object(s.a)(f,2),m=d[0],p=d[1],v=Object(a.useRef)(null);return r.a.createElement("div",{className:"formula node",ref:v,onContextMenu:function(e){e.preventDefault(),p(!0)}},r.a.createElement("span",null,n),r.a.createElement("input",{className:"label",onChange:function(e){return o(z(c.id,t,e.currentTarget.value))},value:u,placeholder:"formula"}),r.a.createElement(K,{open:m,onClose:function(){return p(!1)},dispatch:o,anchorEl:v.current,index:t,node:c}),l?r.a.createElement(h.a,null):"")},Y=function(e){for(var t=e.diff,n=[],a=t;n.length<a;)n.push(r.a.createElement("div",{className:"spacer",key:a}));return(r.a.createElement("div",{className:"spacers-".concat(t)},n))},Z=function e(t){var n=t.node,o=t.dispatch,c=t.store;if(T(n)){var i,u=n.id,s=n.formulas,l=n.forest,d="formulas"===(null===(i=l[0])||void 0===i?void 0:i.nodeType)?r.a.createElement(Y,{diff:R(l[0])-S(n)}):void 0,h=c.justifications[R(n)],p=h.rule,v=h.parentRow;return r.a.createElement("div",{className:"node-container "},r.a.createElement("div",{className:"node-id=".concat(u)},s.map((function(e,t){return r.a.createElement(V,Object.assign({key:"".concat(e,"-").concat(t),node:n,index:t,dispatch:o,row:e.row},e))})),""!==n.id?r.a.createElement("div",{className:"justification"},r.a.createElement(m.a,{className:"rule",onChange:function(e){var t=e.currentTarget.value;return o(H(R(n),{rule:t}))},value:p,placeholder:"rule"}),r.a.createElement(m.a,{className:"row",onChange:function(e){var t=e.currentTarget.value;return o(H(R(n),{parentRow:t}))},value:v,placeholder:"row"})):"AS"),r.a.createElement("div",{className:"children ".concat(l.length>1?"split":"stack")},l.map((function(t){return r.a.createElement(a.Fragment,{key:t.id},d,r.a.createElement(f.a,{from:"node-id=".concat(u),to:"node-id=".concat(t.id),borderColor:"black",fromAnchor:"bottom",toAnchor:"top",delay:0}),r.a.createElement(e,{node:t,dispatch:o,store:c}))}))))}if("contradiction"===n.nodeType)return r.a.createElement("div",{className:"closed-branch-marker"},"X",r.a.createElement(m.a,{className:"rule",onChange:function(e){var t=e.currentTarget.value;return o(G(n.id,t))},value:n.contradictoryRows,placeholder:"rows"}));if("finished"===n.nodeType)return r.a.createElement("div",{className:"finished-branch-marker"},"O ");throw new Error("Invariant violation: Invalid nodeType on node: ".concat(JSON.stringify(n)))},_=function(e){var t=e.onSubmit,n=e.premises,a=e.setPremises;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(n)}},r.a.createElement(m.a,{type:"text",name:"premises","aria-label":"Enter Premises",value:n,onChange:function(e){return a(e.target.value)}}),r.a.createElement("button",{className:"submit-premises",type:"submit"},"Declare Premises"))},ee=[["P->Q,P,~Q","Modus Ponens"],["~(~(P\\/Q)<->(~P/\\~Q))","De Morgen's Law"]],te=function(e){var t=e.onChange;return r.a.createElement("select",{onChange:function(e){var n=e.currentTarget.value;t(n)}},ee.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return(r.a.createElement("option",{value:n,key:n},a))})))},ne=n(100),ae=n(101),re=n(102),oe=n(38),ce=n(27),ie=n.n(ce),ue=n(39),se=n(99),le=function e(t,n){var a=t.formulas,r=t.forest,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=o.concat(a);if(0===r.length)return{label:de(c),rule:"",forest:[]};var i=Object(s.a)(r,1),l=i[0];if("formulas"===l.nodeType){var f=n[R(l)],d=f.rule,m=Number(f.parentRow);if(!me(m))throw new Error('Cited row must be a positive integer. Got "'.concat(m,'"'));if(m>=R(l))throw new Error("Row cited (".concat(m,") must be less than current row (").concat(R(l),")."));return{label:de(c),rule:"St",forest:[{label:fe(c,m),rule:d,forest:r.map((function(t){return e(t,n,c.filter((function(e){return!(e.row===m)})))}))}]}}if("contradiction"===l.nodeType){var h=l.contradictoryRows.split(",").map(Number),p=Object(s.a)(h,2),v=p[0],b=p[1];if(![v,b].every(me))throw new Error('Contradiction must cite 2 rows, separated by a comma. Got "'.concat(l.contradictoryRows,'"'));var w=c.filter((function(e){return[v,b].includes(e.row)})).sort((function(e,t){return t.value.length-e.value.length})),E=Object(s.a)(w,2),y=E[0],g=E[1];if(!y||!g)throw new Error("Contradiction cites non-existent row");var k=de([y].concat(Object(u.a)(c.filter((function(e){return![v,b].includes(e.row)}))),[g]));return{label:de(c),rule:"St",forest:[{label:k,rule:"Ax",forest:[{label:"",rule:"",forest:[]}]}]}}if("finished"===l.nodeType)return{label:de(c),rule:"Lit",forest:[{label:"",rule:"",forest:[]}]};throw new Error("this was supposed to be exhaustive")},fe=function(e,t){var n=e.findIndex((function(e){return e.row===t})),a=e[n],r=e.slice(0,n).concat(e.slice(n+1)),o=[].concat(Object(u.a)(r),[a]);return de(o)},de=function(e){return e.map((function(e){return e.value})).join(",").concat(":|-:")},me=function(e){return e>0},he=function(){var e=Object(ue.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{window.Carnap.checkIchikawaJenkinsSLTableau(t,(function(t){e(t)}))}catch(a){n(a)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(ue.a)(ie.a.mark((function e(t,n){var a,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=le(t,n),e.next=3,he(a);case 3:return r=e.sent,e.abrupt("return",{sequent:a,feedbackTree:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(e){var t=e.tree,n=e.justifications,o=e.feedback,c=e.dispatch;return Object(a.useEffect)((function(){window.Carnap&&pe(t,n).then((function(e){return c(q(e))})).catch((function(e){var t=e.message;return c(q({errorMessage:t}))}))}),[c,n,t]),r.a.createElement(se.a,{className:"json-view",value:JSON.stringify({tree:t,justifications:n,feedback:o}),style:{overflow:"hidden scroll",fontSize:"16px",minWidth:"100%",position:"fixed",bottom:0,maxHeight:"50%"}})},be=function(){var e,t=Object(a.useState)("P->Q,P,~Q"),n=Object(s.a)(t,2),o=n[0],c=n[1],l=a.useReducer.apply(void 0,Object(u.a)((e=D,[function(t,n){var a=Object(s.a)(t,3),r=a[0],o=a[1],c=a[2];switch(n.type){case"UNDO":var i=Object(oe.a)(r),l=i[0];return[i.slice(1),l,[o].concat(Object(u.a)(c))];case"REDO":var f=Object(oe.a)(c),d=f[0],m=f.slice(1);return[[o].concat(Object(u.a)(r)),d,m];default:return[[o].concat(Object(u.a)(r)),e(o,n),[]]}},[[],F,[]]]))),f=Object(s.a)(l,2),d=Object(s.a)(f[0],3),m=d[0],h=d[1],p=d[2],v=f[1],b=function(e){c(e);var t=e.split(",");v(J(t))};return r.a.createElement("main",{className:"App"},r.a.createElement(te,{onChange:b}),r.a.createElement(_,{premises:o,onSubmit:b,setPremises:c}),r.a.createElement("span",{className:"tree-buttons"},r.a.createElement(ne.a,{className:"undo-button",onClick:function(){v({type:"UNDO"})},disabled:!m.length},r.a.createElement(ae.a,null)),r.a.createElement(ne.a,{className:"redo-button",onClick:function(){v({type:"REDO"})},disabled:!p.length},r.a.createElement(re.a,null))),r.a.createElement(Z,{node:h.tree,dispatch:v,store:h}),r.a.createElement(ve,Object(i.a)(Object(i.a)({},h),{},{dispatch:v})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[56,1,2]]]);
//# sourceMappingURL=main.e232b457.chunk.js.map