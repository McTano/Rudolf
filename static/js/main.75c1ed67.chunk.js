(this["webpackJsonptruth-tree"]=this["webpackJsonptruth-tree"]||[]).push([[0],{73:function(e,t,n){e.exports=n(88)},75:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(35),a=n(19),o=n(16),c=(n(74),n(75),n(113)),i=n(114),l=n(115),u=n(0),s=n.n(u),d=n(57),f=n(58),m=n(66),p=n(65),h=n(47),v=n(59),b=function(e){var t=e.formulas,n=void 0===t?[]:t,r=e.forest;return{nodeType:"formulas",formulas:n,forest:void 0===r?[]:r,id:e.id}},w=function e(t,n){"contradiction"!==t.nodeType&&("finished"!==t.nodeType?0===t.forest.length?t.forest=n(t.id):t.forest.forEach((function(t){return e(t,n)})):console.warn("shouldn't try to append to finished branch"))},g=function(e){return b({formulas:e.map((function(e,t){return E(e,t+1)})),forest:[],id:""})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return{value:e,resolved:!1,row:t}},y=function(e){return null!=e&&"formulas"===e.nodeType&&0===e.forest.length},k=function(e){return e.formulas[0].row},j=function(e,t){for(var n=[];e-- >0;)n.push(E("",t++));return n},O=function(e,t){var n,r=function(e){return e.split("").map((function(t){if("0"===t||"1"===t)return Number(t);throw new Error("invalid character in node id: ".concat(t," in ").concat(e))}))}(t),a=e,o=Object(v.a)(r);try{for(o.s();!(n=o.n()).done;){var c=n.value;if("formulas"!==a.nodeType)throw new Error("Failed to get node path");a=a.forest[c]}}catch(i){o.e(i)}finally{o.f()}return a},C=function(e){return"formulas"===e.nodeType},S=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"updateFormula",value:function(e,t,n){O(this.draftState.tree,e).formulas[t].value=n}},{key:"updateJustification",value:function(e,t){Object.assign(this.draftState.justifications[e],t)}},{key:"updateContradiction",value:function(e,t){Object.assign(O(this.draftState.tree,e),{contradictoryRows:t})}},{key:"updateFeedback",value:function(e){this.draftState.feedback=e}},{key:"toggleResolved",value:function(e,t){var n=O(this.draftState.tree,e);n.formulas[t].resolved=!n.formulas[t].resolved}},{key:"createTree",value:function(e){this.draftState.tree=g(e),this.draftState.nextRow=e.length+1,this.draftState.justifications={}}},{key:"continueBranch",value:function(e,t){var n=this,r=O(this.draftState.tree,e);w(r,(function(e){return[b({id:"".concat(e,"0"),formulas:j(t,n.draftState.nextRow)})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"splitBranch",value:function(e,t){var n=this,r=O(this.draftState.tree,e);w(r,(function(e){var r=j(t,n.draftState.nextRow);return[b({id:"".concat(e,"0"),formulas:r}),b({id:"".concat(e,"1"),formulas:r})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"markContradiction",value:function(e){var t,n=O(this.draftState.tree,e);n.forest=[(t=n.id,{nodeType:"contradiction",formulas:[],contradictoryRows:"",id:"".concat(t,"0")})]}},{key:"markFinished",value:function(e){var t;O(this.draftState.tree,e).forest=[(t=e,{nodeType:"finished",formulas:[],id:"".concat(t,"0")})]}},{key:"reopenBranch",value:function(e){O(this.draftState.tree,e).forest=[]}}]),n}(h.ImmerReducer),x=Object(h.createReducerFunction)(S),R=Object(h.createActionCreators)(S),T=R.continueBranch,N=R.createTree,B=R.markContradiction,I=R.markFinished,A=R.reopenBranch,F=R.splitBranch,P=R.toggleResolved,z=R.updateContradiction,D=R.updateFeedback,M=R.updateFormula,J=R.updateJustification,W=n(52),L=n(108),G=n(23),U=Object(G.a)({Bounder:{minWidth:"100%",position:"fixed",bottom:0,display:"flex",flexDirection:"column",zIndex:10},TextArea:{overflow:"hidden scroll",fontSize:"16px"},Toggle:{backgroundColor:"black",color:"white",fontSize:"13px",alignSelf:"flex-end","&:hover":{cursor:"pointer"},padding:"2px 10px"}}),V=function(e){var t=e.tree,n=e.justifications,r=e.feedback,a=U(),c=Object(u.useState)(!1),i=Object(o.a)(c,2),l=i[0],d=i[1];return s.a.createElement("div",{className:a.Bounder},s.a.createElement("div",{className:a.Toggle,onClick:function(){d(!l)}},l?"close":"open"),s.a.createElement(L.a,{className:a.TextArea,value:JSON.stringify({tree:t,justifications:n,feedback:r}),style:{maxHeight:l?"50vh":"0vh"}}))},H=n(42),Q=n.n(H),X=function(e){var t=e.onSubmit,n=e.premises,r=e.setPremises;return s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(n)}},s.a.createElement(Q.a,{type:"text",name:"premises","aria-label":"Enter Premises",value:n,onChange:function(e){return r(e.target.value)}}),s.a.createElement("button",{className:"submit-premises",type:"submit"},"Declare Premises"))},Y=n(33),$=Object(G.a)({AppBounder:{color:"black",fontSize:"calc(8px + 1.5vmin)",display:"flex",flexDirection:"column",alignItems:"center",margin:"1em"},TopItemsBounder:{display:"flex",flexDirection:"column",alignItems:"center"},TreeBounder:{borderStyle:"solid",borderWidth:".1em",borderRadius:".2em","&::-webkit-scrollbar":{height:"6px",width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"black"},maxWidth:"80vw",overflowX:"scroll"}}),q=n(46),K=n(112),Z=n(116),_=n(119),ee=function(e){var t=e.open,n=e.dispatch,r=e.index,a=e.anchorEl,o=e.onClose,c=e.node,i=c.formulas[r];return s.a.createElement(Z.a,{open:t,getContentAnchorEl:null,anchorEl:a,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},style:{zIndex:2e3}},s.a.createElement(_.a,{onClick:function(){n(T(c.id,1)),o()}},"Continue Branch w/ 1 formula"),s.a.createElement(_.a,{onClick:function(){n(F(c.id,1)),o()}},"Split Branch w/ 1 formula"),s.a.createElement(_.a,{onClick:function(){n(T(c.id,2)),o()}},"Continue Branch w/ 2 formulas"),s.a.createElement(_.a,{onClick:function(){n(F(c.id,2)),o()}},"Split Branch w/ 2 formulas"),s.a.createElement(_.a,{onClick:function(){n(P(c.id,r)),o()}},"Mark as ",i.resolved?"Un":"","Resolved"),y(c)&&s.a.createElement(_.a,{onClick:function(){n(B(c.id)),o()}},"Close Branch With Contradiction"),y(c)&&s.a.createElement(_.a,{onClick:function(){n(I(c.id)),o()}},"Mark Branch Finished"),"contradiction"===c.nodeType&&s.a.createElement(_.a,{onClick:function(){n(A(c.id)),o()}},"Reopen Branch"))},te=Object(G.a)({TruthTree:{display:"grid",padding:"0.2em",gridTemplateColumns:"[rowNumber] auto [nodeView] auto [justification] auto",placeItems:"center",columnGap:".5em",rowGap:".75em"},RowNumber:{gridColumn:"rowNumber"},Justification:{gridColumn:"justification",display:"flex",alignSelf:"start"},NodeViewContainer:{gridColumn:"nodeView"},NodeView:{display:"grid",textAlign:"center",columnGap:".5em",rowGap:".75em"},FormulaBounder:{display:"grid",borderRadius:".2em",borderWidth:".1em",borderStyle:"solid",borderColor:"transparent",rowGap:".75em"},Tooltip:{fontSize:"3em"}});var ne=function(e){var t=e.onChange,n=e.value,r=e.placeholder,a=e.style;return(s.a.createElement(Q.a,{style:a,inputStyle:{padding:"0vmin .5vmin",backgroundColor:"transparent",borderStyle:"none"},onChange:t,value:n,placeholder:r}))},re=function(e){var t=e.index,n=e.dispatch,r=e.node,a=r.formulas[t],c=a.value,i=a.resolved,l=Object(u.useState)(!1),d=Object(o.a)(l,2),f=d[0],m=d[1],p=Object(u.useRef)(null);return s.a.createElement("div",{style:{height:"1.5em",gridRow:t+1},ref:p,onContextMenu:function(e){e.preventDefault(),m(!0)}},s.a.createElement(ne,{onChange:function(e){n(M(r.id,t,e.currentTarget.value))},value:c,placeholder:"formula"}),s.a.createElement(ee,{open:f,onClose:function(){return m(!1)},dispatch:n,anchorEl:p.current,index:t,node:r}),i?s.a.createElement(K.a,null):"")},ae=n(11),oe=n(117),ce=Object(ae.a)({tooltip:{fontSize:16}})(oe.a),ie=Object(G.a)({Correct:{borderColor:"green"},Incorrect:{borderColor:"red"}}),le=function e(t){var n=t.node,r=t.dispatch,a=t.justifications,o=t.feedbackMap,c=t.nextRow,i=Object(q.a)(t,["node","dispatch","justifications","feedbackMap","nextRow"]),l=te(),u=ie(),d="",f="";if(o){var m,p=o[n.id];if(p)d=null!==(m=p.info)&&void 0!==m?m:"",f="correct"===p.class?u.Correct:u.Incorrect}if(C(n)){var h=n.id,v=n.formulas,b=n.forest;return(s.a.createElement("div",{className:l.NodeView,style:{gridTemplateRows:"repeat(".concat(c-k(n),", ").concat("1.5em",")"),gridTemplateColumns:"repeat(".concat(b.length,", auto)")}},s.a.createElement("div",{style:{gridRow:"1",gridColumn:"1 / span ".concat(b.length)}},s.a.createElement(ce,{title:d},s.a.createElement("div",null,s.a.createElement(Y.ArcherElement,{id:h,relations:b.map((function(e){return{targetId:e.id,targetAnchor:"top",sourceAnchor:"bottom"}}))},s.a.createElement("div",Object.assign({className:"".concat(l.FormulaBounder," ").concat(f," ")},i),v.map((function(e,t){return s.a.createElement(re,Object.assign({key:"".concat(e,"-").concat(t),node:n,index:t,dispatch:r},e))}))))))),b.map((function(t,i){return s.a.createElement("div",{key:t.id,style:{gridColumn:"".concat(i," / span 1"),gridRow:t.formulas[0]?"".concat(t.formulas[0].row-k(n)+1):2}},s.a.createElement(e,{node:t,dispatch:r,justifications:a,nextRow:c,feedbackMap:o}))}))))}if("contradiction"===n.nodeType)return s.a.createElement(ce,{title:d},s.a.createElement("div",null,s.a.createElement(Y.ArcherElement,{id:n.id},s.a.createElement("div",Object.assign({className:"closed-branch-marker node ".concat(f)},i),"X",s.a.createElement(ne,{onChange:function(e){var t=e.currentTarget.value;return r(z(n.id,t))},value:n.contradictoryRows,placeholder:"rows"})))));if("finished"===n.nodeType)return s.a.createElement(ce,{title:d},s.a.createElement("div",null,s.a.createElement(Y.ArcherElement,{id:n.id},s.a.createElement("div",Object.assign({className:"finished-branch-marker ".concat(f)},i),"O"))));throw new Error("Invariant violation: Invalid nodeType on node: ".concat(JSON.stringify(n)))},ue=function(e){var t=e.currentState,n=e.dispatch,r=te(),o=t.nextRow,c=t.tree,i=t.justifications,l=t.feedback,u=function e(t,n){return t<n?[t].concat(Object(a.a)(e(t+1,n))):[]}(1,o);return s.a.createElement(ce,{title:l.success?"":l.errorMessage},s.a.createElement("div",{className:r.TruthTree,style:{gridTemplateRows:"repeat(".concat(o-1,", ").concat("1.5em",")")}},u.map((function(e){return s.a.createElement("div",{className:r.RowNumber,key:e,style:{gridRow:e}},"".concat(e,"."))})),s.a.createElement("div",{className:r.NodeViewContainer,style:{gridRow:"1 / span ".concat(u.length)}},s.a.createElement(le,{node:c,dispatch:n,justifications:i,feedbackMap:l.success?l.feedback:void 0,nextRow:o})),Object.keys(i).map((function(e){var t=Number(e),a=i[t],o=a.parentRow,c=a.rule;return s.a.createElement("div",{className:r.Justification,key:t,style:{gridRow:t}},s.a.createElement(ne,{style:{marginRight:".1em"},onChange:function(e){var r=e.currentTarget.value;return n(J(t,{parentRow:r}))},value:o,placeholder:"row"}),s.a.createElement(ne,{onChange:function(e){var r=e.currentTarget.value;return n(J(t,{rule:r}))},value:c,placeholder:"rule"}))}))))},se=n(37),de=n.n(se),fe=n(54),me=function e(t,n){var r=t.formulas,c=t.forest,i=t.id,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=l.concat(r);if(0===c.length)return{label:we(u),rule:"",forest:[],id:i};var s=Object(o.a)(c,1),d=s[0];if("formulas"===d.nodeType){var f=n[k(d)],m=f.rule,p=Number(f.parentRow);if(!ge(p))throw new Error('Cited row must be a positive integer. Got "'.concat(p,'"'));if(p>=k(d))throw new Error("Row cited (".concat(p,") must be less than current row (").concat(k(d),")."));return{label:we(u),rule:"St",forest:[{label:be(u,p),rule:m,id:i,forest:c.map((function(t){return e(t,n,u.filter((function(e){return!(e.row===p)})))}))}]}}if("contradiction"===d.nodeType){var h=d.contradictoryRows.split(",").map(Number),v=Object(o.a)(h,2),b=v[0],w=v[1];if(![b,w].every(ge))throw new Error('Contradiction must cite 2 rows, separated by a comma. Got "'.concat(d.contradictoryRows,'"'));var g=u.filter((function(e){return[b,w].includes(e.row)})).sort((function(e,t){return t.value.length-e.value.length})),E=Object(o.a)(g,2),y=E[0],j=E[1];if(!y||!j)throw new Error("Contradiction cites non-existent row");var O=we([].concat(Object(a.a)(u.filter((function(e){return![b,w].includes(e.row)}))),[y,j]));return{label:we(u),rule:"St",id:i,forest:[{label:O,rule:"Ax",id:d.id,forest:[{label:"",rule:"",forest:[]}]}]}}if("finished"===d.nodeType)return{label:we(u),rule:"St",id:i,forest:[{label:we(u),rule:"Lit",id:d.id,forest:[{label:"",rule:"",forest:[]}]}]};throw new Error("this was supposed to be exhaustive")},pe=function(e,t){var n={};if(e.forest.length){!function e(t,r,a){if("string"===typeof t.id){if("Ax"===t.rule||"Lit"===t.rule)return void(n[t.id]=Ee(r));n[t.id]=a,t.forest.forEach((function(t,n){e(t,r.forest[n],Ee(r))}))}else t.forest.forEach((function(t,n){e(t,r.forest[n],a)}))}(e,t,{class:"correct",info:"Assumptions"})}return n},he=function(){var e=Object(fe.a)(de.a.mark((function e(t,n){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{n(t,(function(t){e(t)}))}catch(a){r(a)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(fe.a)(de.a.mark((function e(t,n,r){var a,o;return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=me(t,n),e.next=3,he(a,r);case 3:return o=e.sent,e.abrupt("return",{success:!0,feedback:pe(a,o)});case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),be=function(e,t){var n=e.findIndex((function(e){return e.row===t})),r=e[n],o=e.slice(0,n).concat(e.slice(n+1)),c=[].concat(Object(a.a)(o),[r]);return we(c)},we=function(e){return e.map((function(e){return e.value})).join(",").concat(":|-:")},ge=function(e){return e>0},Ee=function(e){e.forest;var t=Object(q.a)(e,["forest"]);return ke(t)},ye={"WRONG NUMBER OF PREMISES":"Wrong number of branches.","THIS DOESN'T FOLLOW BY THIS RULE":"Incorrect use of resolution rule."},ke=function(e){var t;return Object(r.a)(Object(r.a)({},e),{},{info:null!==(t=ye[e.info.toLocaleUpperCase()])&&void 0!==t?t:e.info})},je=function(e){var t,n=e.initialPremises,d=void 0===n?"":n,f=e.checker,m=Object(u.useState)(d),p=Object(o.a)(m,2),h=p[0],v=p[1],b=u.useReducer.apply(void 0,Object(a.a)((t=x,[function(e,n){var r=Object(o.a)(e,3),c=r[0],i=r[1],l=r[2];switch(n.type){case"UNDO":var u=Object(W.a)(c),s=u[0];return[u.slice(1),s,[i].concat(Object(a.a)(l))];case"REDO":var d=Object(W.a)(l),f=d[0],m=d.slice(1);return[[i].concat(Object(a.a)(c)),f,m];default:return[[i].concat(Object(a.a)(c)),t(i,n),[]]}},[[],function(e){var t=e.split(",");return{tree:g(t),nextRow:t.length+1,justifications:{},feedback:{success:!0,feedback:{}}}}(h),[]]]))),w=Object(o.a)(b,2),E=Object(o.a)(w[0],3),y=E[0],k=E[1],j=E[2],O=w[1],C=k.tree,S=k.justifications,R=k.feedback;Object(u.useEffect)((function(){window.Carnap&&ve(C,S,f).then((function(e){var t=e.feedback;return O(D({success:!0,feedback:t}))})).catch((function(e){var t=e.message;return O(D({success:!1,errorMessage:t}))}))}),[O,S,C,f]);var T=$(),B=ie(),I=Object(u.useRef)(null);return s.a.createElement("main",{className:T.AppBounder},s.a.createElement("div",{className:T.TopItemsBounder,ref:I},s.a.createElement(X,{premises:h,onSubmit:function(e){v(e);var t=e.split(",");O(N(t))},setPremises:v}),s.a.createElement("span",{className:"tree-buttons"},s.a.createElement(c.a,{"aria-label":"Undo",className:"undo-button",onClick:function(){O({type:"UNDO"})},disabled:!y.length},s.a.createElement(i.a,null)),s.a.createElement(c.a,{"aria-label":"Redo",className:"redo-button",onClick:function(){O({type:"REDO"})},disabled:!j.length},s.a.createElement(l.a,null)))),s.a.createElement("div",{className:"".concat(T.TreeBounder," ").concat(R.success?"":B.Incorrect)},s.a.createElement(Y.ArcherContainer,{arrowLength:0,style:{zIndex:1},svgContainerStyle:{zIndex:-1},strokeColor:"black",noCurves:!1},s.a.createElement(ue,{currentState:k,dispatch:O}))),s.a.createElement(V,Object(r.a)(Object(r.a)({},k),{},{dispatch:O})))},Oe=n(7),Ce=n.n(Oe),Se=[{elementId:"problem-1.1",initialPremises:"P->Q,P,~Q",checker:Carnap.checkIchikawaJenkinsSLTableau},{elementId:"problem-1.2",initialPremises:""}];Se.forEach((function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Carnap.checkIchikawaJenkinsSLTableau;Ce.a.render(s.a.createElement(je,{initialPremises:t,checker:n}),document.getElementById(e))}(e.elementId,e.initialPremises,e.checker)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[73,1,2]]]);
//# sourceMappingURL=main.75c1ed67.chunk.js.map