(this["webpackJsonptruth-tree"]=this["webpackJsonptruth-tree"]||[]).push([[0],{81:function(e,t,n){e.exports=n(96)},87:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),c=n.n(o),i=n(25),l=n.n(i),u=n(35),s=n(14),d=n(13),f=(n(87),n(88),n(123)),m=n(124),h=n(125),p=n(30),v=n(64),b=n(65),w=n(74),g=n(73),E=n(54),y=n(66),k=function(e){var t=e.formulas,n=void 0===t?[]:t,r=e.forest;return{nodeType:"formulas",formulas:n,forest:void 0===r?[]:r,id:e.id}},j=function e(t,n){"contradiction"!==t.nodeType&&("finished"!==t.nodeType?0===t.forest.length?t.forest=n(t.id):t.forest.forEach((function(t){return e(t,n)})):console.warn("shouldn't try to append to finished branch"))},O=function(e){return k({formulas:e.map((function(e,t){return C(e,t+1)})),forest:[],id:""})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return{value:e,resolved:!1,row:t}},R=function(e){return null!=e&&"formulas"===e.nodeType&&0===e.forest.length},S=function(e){return e.formulas[0].row},x=function(e,t){for(var n=[];e-- >0;)n.push(C("",t++));return n},T=function(e,t){var n,r=function(e){return e.split("").map((function(t){if("0"===t||"1"===t)return Number(t);throw new Error("invalid character in node id: ".concat(t," in ").concat(e))}))}(t),a=e,o=Object(y.a)(r);try{for(o.s();!(n=o.n()).done;){var c=n.value;if("formulas"!==a.nodeType)throw new Error("Failed to get node path");a=a.forest[c]}}catch(i){o.e(i)}finally{o.f()}return a},N=function(e){return"formulas"===e.nodeType},I=function(e){Object(w.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"updateFormula",value:function(e,t,n){T(this.draftState.tree,e).formulas[t].value=n}},{key:"updateJustification",value:function(e,t){Object.assign(this.draftState.justifications[e],t)}},{key:"updateContradiction",value:function(e,t){Object.assign(T(this.draftState.tree,e),{contradictoryRows:t})}},{key:"updateFeedback",value:function(e){this.draftState.feedback=e}},{key:"toggleResolved",value:function(e,t){var n=T(this.draftState.tree,e);n.formulas[t].resolved=!n.formulas[t].resolved}},{key:"createTree",value:function(e){this.draftState.tree=O(e),this.draftState.nextRow=e.length+1,this.draftState.justifications={}}},{key:"continueBranch",value:function(e,t){var n=this,r=T(this.draftState.tree,e);j(r,(function(e){return[k({id:"".concat(e,"0"),formulas:x(t,n.draftState.nextRow)})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"splitBranch",value:function(e,t){var n=this,r=T(this.draftState.tree,e);j(r,(function(e){var r=x(t,n.draftState.nextRow);return[k({id:"".concat(e,"0"),formulas:r}),k({id:"".concat(e,"1"),formulas:r})]})),this.draftState.justifications[this.draftState.nextRow]={rule:"",parentRow:""},this.draftState.nextRow+=t}},{key:"markContradiction",value:function(e){var t,n=T(this.draftState.tree,e);n.forest=[(t=n.id,{nodeType:"contradiction",formulas:[],contradictoryRows:"",id:"".concat(t,"0")})]}},{key:"markFinished",value:function(e){var t;T(this.draftState.tree,e).forest=[(t=e,{nodeType:"finished",formulas:[],id:"".concat(t,"0")})]}},{key:"reopenBranch",value:function(e){T(this.draftState.tree,e).forest=[]}}]),n}(E.ImmerReducer),B=Object(E.createReducerFunction)(I),P=Object(E.createActionCreators)(I),A=P.continueBranch,F=P.createTree,L=P.markContradiction,D=P.markFinished,J=P.reopenBranch,M=P.splitBranch,U=P.toggleResolved,W=P.updateContradiction,G=P.updateFeedback,z=P.updateFormula,V=P.updateJustification,Q=n(28),H=Object(Q.a)({AppBounder:{color:"black",fontSize:"calc(8px + 1.5vmin)",display:"flex",flexDirection:"column",alignItems:"center",margin:"1em",fontFamily:"Fira Logic",minWidth:"35vw"},TopItemsBounder:{display:"flex",flexDirection:"column",alignItems:"center"},TreeBounder:{borderStyle:"solid",minWidth:"30vw",minHeight:"30vw",borderWidth:".1em",borderRadius:".2em","&::-webkit-scrollbar":{height:"6px",width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"black"},maxWidth:"80vw",overflowX:"scroll"}}),X=Object(Q.a)({Correct:{borderColor:"green"},Incorrect:{borderColor:"red"}}),Y=n(58),K=n(59),$=n(51),q=function e(t,n){var r=t.formulas,a=t.forest,o=t.id,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=c.concat(r);if(0===a.length)return{label:ne(i),rule:"",forest:[],id:o};var l=Object(d.a)(a,1),u=l[0];if("formulas"===u.nodeType){var f=n[S(u)],m=f.rule,h=Number(f.parentRow);if(!re(h))throw new Error('Cited row must be a positive integer. Got "'.concat(h,'"'));if(h>=S(u))throw new Error("Row cited (".concat(h,") must be less than current row (").concat(S(u),")."));var p=te(i,h);return{label:ne(i),rule:"St",forest:[{label:ne(p),rule:m,id:o,forest:a.map((function(t){return e(t,n,p.filter((function(e){return!e.resolved})))}))}]}}if("contradiction"===u.nodeType){var v=u.contradictoryRows.split(",").map(Number),b=Object(d.a)(v,2),w=b[0],g=b[1];if(![w,g].every(re))throw new Error('Contradiction must cite 2 rows, separated by a comma. Got "'.concat(u.contradictoryRows,'"'));var E=i.filter((function(e){return[w,g].includes(e.row)})).sort((function(e,t){return t.value.length-e.value.length})),y=Object(d.a)(E,2),k=y[0],j=y[1];if(!k||!j)throw new Error("Contradiction cites non-existent row");var O=ne([].concat(Object(s.a)(i.filter((function(e){return![w,g].includes(e.row)}))),[k,j]));return{label:ne(i),rule:"St",id:o,forest:[{label:O,rule:"Ax",id:u.id,forest:[{label:"",rule:"",forest:[]}]}]}}if("finished"===u.nodeType)return{label:ne(i),rule:"St",id:o,forest:[{label:ne(i),rule:"Lit",id:u.id,forest:[{label:"",rule:"",forest:[]}]}]};throw new Error("this was supposed to be exhaustive")},Z=function(e,t){var n={};if(e.forest.length){!function e(t,r,a){if("string"===typeof t.id){if("Ax"===t.rule||"Lit"===t.rule)return void(n[t.id]=ae(r));n[t.id]=a,t.forest.forEach((function(t,n){e(t,r.forest[n],ae(r))}))}else t.forest.forEach((function(t,n){e(t,r.forest[n],a)}))}(e,t,{class:"correct",info:"Assumptions"})}return n},_=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{n(t,(function(t){e(t)}))}catch(a){r(a)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q(t,n),console.info(a),e.next=4,_(a,r);case 4:return o=e.sent,e.abrupt("return",{success:!0,feedback:Z(a,o)});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),te=function(e,t){var n=e.findIndex((function(e){return e.row===t})),r=e[n],a=e.slice(0,n).concat(e.slice(n+1));return[].concat(Object(s.a)(a),[r])},ne=function(e){return e.map((function(e){return e.value})).join(",").concat(":|-:")},re=function(e){return e>0},ae=function(e){e.forest;var t=Object($.a)(e,["forest"]);return ce(t)},oe={"WRONG NUMBER OF PREMISES":"Wrong number of branches.","THIS DOESN'T FOLLOW BY THIS RULE":"Incorrect use of resolution rule."},ce=function(e){var t;return Object(K.a)(Object(K.a)({},e),{},{info:null!==(t=oe[e.info.toLocaleUpperCase()])&&void 0!==t?t:e.info})},ie=function(e){var t=e.onSubmit,n=e.premises,r=e.setPremises;return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(n)}},a.a.createElement("input",{type:"text",name:"premises","aria-label":"Enter Premises",value:n,width:"50%",onChange:function(e){return r(e.target.value)}}),a.a.createElement("button",{className:"submit-premises",type:"submit"},"Declare Premises"))},le=n(118),ue=function(e){return a.a.createElement("a",{href:"mailto:phil.logic.ubc@gmail.com?subject=".concat(encodeURIComponent("USER FEEDBACK - "),"&body=").concat(encodeURIComponent("DESCRIBE YOUR PROBLEM OR SUGGESTION HERE \n\n\n\n".concat(JSON.stringify(e)))),style:{alignSelf:"flex-end"}},"feedback",a.a.createElement(le.a,null))},se=n(122),de=n(126),fe=n(129),me=function(e){var t=e.open,n=e.dispatch,r=e.index,o=e.anchorEl,c=e.onClose,i=e.node,l=i.formulas[r];return a.a.createElement(de.a,{open:t,getContentAnchorEl:null,anchorEl:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},style:{zIndex:2e3}},a.a.createElement(fe.a,{onClick:function(){n(A(i.id,1)),c()}},"Continue Branch w/ 1 formula"),a.a.createElement(fe.a,{onClick:function(){n(M(i.id,1)),c()}},"Split Branch w/ 1 formula"),a.a.createElement(fe.a,{onClick:function(){n(A(i.id,2)),c()}},"Continue Branch w/ 2 formulas"),a.a.createElement(fe.a,{onClick:function(){n(M(i.id,2)),c()}},"Split Branch w/ 2 formulas"),a.a.createElement(fe.a,{onClick:function(){n(U(i.id,r)),c()}},"Mark as ",l.resolved?"Un":"","Resolved"),R(i)&&a.a.createElement(fe.a,{onClick:function(){n(L(i.id)),c()}},"Close Branch With Contradiction"),R(i)&&a.a.createElement(fe.a,{onClick:function(){n(D(i.id)),c()}},"Mark Branch Finished"),"contradiction"===i.nodeType&&a.a.createElement(fe.a,{onClick:function(){n(J(i.id)),c()}},"Reopen Branch"))},he=Object(Q.a)({TruthTree:{display:"grid",padding:"0.2em",gridTemplateColumns:"[rowNumber] auto [nodeView] auto [justification] auto",placeItems:"center",columnGap:".5em",rowGap:".75em"},RowNumber:{gridColumn:"rowNumber"},Justification:{gridColumn:"justification",display:"flex",alignSelf:"start"},NodeViewContainer:{gridColumn:"nodeView"},NodeView:{display:"grid",textAlign:"center",columnGap:".5em",rowGap:".75em"},FormulaBounder:{display:"grid",borderRadius:".2em",borderWidth:".1em",borderStyle:"solid",rowGap:".75em"},Tooltip:{fontSize:"3em"}}),pe=n(71),ve=n.n(pe);var be=function(e){var t=e.onChange,n=e.value,r=e.placeholder,o=e.style;return a.a.createElement(ve.a,{style:o,inputStyle:{padding:"0vmin .5vmin",backgroundColor:"transparent",borderStyle:"none"},onChange:t,value:n,placeholder:r})},we=function(e){var t=e.index,n=e.dispatch,o=e.node,c=o.formulas[t],i=c.value,l=c.resolved,u=Object(r.useState)(!1),s=Object(d.a)(u,2),f=s[0],m=s[1],h=Object(r.useRef)(null);return a.a.createElement("div",{style:{height:"1.5em",gridRow:t+1},ref:h,onContextMenu:function(e){e.preventDefault(),m(!0)}},a.a.createElement(be,{onChange:function(e){n(z(o.id,t,e.currentTarget.value))},value:i,placeholder:"formula"}),a.a.createElement(me,{open:f,onClose:function(){return m(!1)},dispatch:n,anchorEl:h.current,index:t,node:o}),l?a.a.createElement(se.a,null):"")},ge=n(8),Ee=n(128),ye=Object(ge.a)({tooltip:{fontSize:16}})(Ee.a),ke=function e(t){var n=t.node,r=t.dispatch,o=t.justifications,c=t.feedbackMap,i=t.nextRow,l=Object($.a)(t,["node","dispatch","justifications","feedbackMap","nextRow"]),u=he(),s=X(),d="",f="";if(c){var m,h=c[n.id];if(h)d=null!==(m=h.info)&&void 0!==m?m:"",f="correct"===h.class?s.Correct:s.Incorrect}if(N(n)){var v=n.id,b=n.formulas,w=n.forest;return a.a.createElement("div",{className:u.NodeView,style:{gridTemplateRows:"repeat(".concat(i-S(n),", ").concat("1.5em",")"),gridTemplateColumns:"repeat(".concat(w.length,", auto)")}},a.a.createElement("div",{style:{gridRow:"1",gridColumn:"1 / span ".concat(w.length)}},a.a.createElement(ye,{title:d},a.a.createElement("div",null,a.a.createElement(p.ArcherElement,{id:v,relations:w.map((function(e){return{targetId:e.id,targetAnchor:"top",sourceAnchor:"bottom"}}))},a.a.createElement("div",Object.assign({className:"".concat(u.FormulaBounder," ").concat(f," ")},l),b.map((function(e,t){return a.a.createElement(we,Object.assign({key:"".concat(e,"-").concat(t),node:n,index:t,dispatch:r},e))}))))))),w.map((function(t,l){return a.a.createElement("div",{key:t.id,style:{gridColumn:"".concat(l," / span 1"),gridRow:t.formulas[0]?"".concat(t.formulas[0].row-S(n)+1):2}},a.a.createElement(e,{node:t,dispatch:r,justifications:o,nextRow:i,feedbackMap:c}))})))}if("contradiction"===n.nodeType)return a.a.createElement(ye,{title:d},a.a.createElement("div",null,a.a.createElement(p.ArcherElement,{id:n.id},a.a.createElement("div",Object.assign({className:"closed-branch-marker node ".concat(f)},l),"X",a.a.createElement(be,{onChange:function(e){var t=e.currentTarget.value;return r(W(n.id,t))},value:n.contradictoryRows,placeholder:"rows"})))));if("finished"===n.nodeType)return a.a.createElement(ye,{title:d},a.a.createElement("div",null,a.a.createElement(p.ArcherElement,{id:n.id},a.a.createElement("div",Object.assign({className:"finished-branch-marker ".concat(f)},l),"\u2193"))));throw new Error("Invariant violation: Invalid nodeType on node: ".concat(JSON.stringify(n)))},je=function(e){var t=e.currentState,n=e.dispatch,r=he(),o=t.nextRow,c=t.tree,i=t.justifications,l=t.feedback,u=function e(t,n){return t<n?[t].concat(Object(s.a)(e(t+1,n))):[]}(1,o);return a.a.createElement(ye,{title:l.success?"":l.errorMessage},a.a.createElement("div",{className:r.TruthTree,style:{gridTemplateRows:"repeat(".concat(o-1,", ").concat("1.5em",")")}},u.map((function(e){return a.a.createElement("div",{className:r.RowNumber,key:e,style:{gridRow:e}},"".concat(e,"."))})),a.a.createElement("div",{className:r.NodeViewContainer,style:{gridRow:"1 / span ".concat(u.length)}},a.a.createElement(ke,{node:c,dispatch:n,justifications:i,feedbackMap:l.success?l.feedback:void 0,nextRow:o})),Object.keys(i).map((function(e){var t=Number(e),o=i[t],c=o.parentRow,l=o.rule;return a.a.createElement("div",{className:r.Justification,key:t,style:{gridRow:t}},a.a.createElement(be,{style:{marginRight:".1em"},onChange:function(e){var r=e.currentTarget.value;return n(V(t,{parentRow:r}))},value:c,placeholder:"row"}),a.a.createElement(be,{onChange:function(e){var r=e.currentTarget.value;return n(V(t,{rule:r}))},value:l,placeholder:"rule"}))}))))},Oe=function(e){var t,n=e.initialPremises,o=void 0===n?"":n,c=e.checker,i=Object(r.useState)(o),v=Object(d.a)(i,2),b=v[0],w=v[1],g=r.useReducer.apply(void 0,Object(s.a)((t=B,[function(e,n){var r=Object(d.a)(e,3),a=r[0],o=r[1],c=r[2];switch(n.type){case"UNDO":var i=Object(Y.a)(a),l=i[0];return[i.slice(1),l,[o].concat(Object(s.a)(c))];case"REDO":var u=Object(Y.a)(c),f=u[0],m=u.slice(1);return[[o].concat(Object(s.a)(a)),f,m];default:return[[o].concat(Object(s.a)(a)),t(o,n),[]]}},[[],function(e){var t=e.split(",");return{tree:O(t),nextRow:t.length+1,justifications:{},feedback:{success:!0,feedback:{}}}}(b),[]]]))),E=Object(d.a)(g,2),y=Object(d.a)(E[0],3),k=y[0],j=y[1],C=y[2],R=E[1],S=j.tree,x=j.justifications,T=j.feedback;Object(r.useEffect)((function(){var e,t=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee(t,n,r).then((function(e){var t=e.feedback;return R(G({success:!0,feedback:t}))})).catch((function(e){var t=e.message;return R(G({success:!1,errorMessage:t}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n=null===(e=window)||void 0===e?void 0:e.Carnap;if("function"===typeof c)t(S,x,c);else if(n){var r=n[c];"function"==typeof r?t(S,x,r):console.error("The name ".concat(c," is not defined as a function on the Carnap client object. ").concat(Carnap))}else console.warn("The Carnap global variable is not defined or does not contain an object. Skipping Check.")}),[S,x,c]);var N=H(),I=X(),P=Object(r.useRef)(null);return a.a.createElement("main",{className:N.AppBounder},a.a.createElement("div",{className:N.TopItemsBounder,ref:P},a.a.createElement(ie,{premises:b,onSubmit:function(e){w(e);var t=e.split(",");R(F(t))},setPremises:w}),a.a.createElement(ue,{currentState:j}),a.a.createElement("span",{className:"tree-buttons"},a.a.createElement(f.a,{"aria-label":"Undo",className:"undo-button",onClick:function(){R({type:"UNDO"})},disabled:!k.length},a.a.createElement(m.a,null)),a.a.createElement(f.a,{"aria-label":"Redo",className:"redo-button",onClick:function(){R({type:"REDO"})},disabled:!C.length},a.a.createElement(h.a,null)))),a.a.createElement("div",{className:"".concat(N.TreeBounder," ").concat(T.success?"":I.Incorrect)},a.a.createElement(p.ArcherContainer,{arrowLength:0,style:{zIndex:1},svgContainerStyle:{zIndex:-1},strokeColor:"black",noCurves:!1},a.a.createElement(je,{currentState:j,dispatch:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));[{elementId:"problem-1.1",initialPremises:"P->Q,P,~Q",checker:"checkIchikawaJenkinsSLTableau"},{elementId:"problem-1.2",checker:"checkIchikawaJenkinsSLTableau",initialPremises:""},{elementId:"problem-1.3",checker:"checkIchikawaJenkinsQLTableau",initialPremises:"Ax(Px->Qx),~Qa,~~Pa"}].forEach((function(e){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkIchikawaJenkinsSLTableau";c.a.render(a.a.createElement(Oe,{initialPremises:t,checker:n}),document.getElementById(e))}(e.elementId,e.initialPremises,e.checker)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.fd803fed.chunk.js.map